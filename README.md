--- 
# Чтобы СКАЧАТЬ нажмите [releases](https://github.com/provincialkateam/provincial/releases)
---
Данный репозиторий для разработчиков, а не игроков.
Если вы хотите помочь в разработке, то вам следует изучить [гит](https://git-scm.com/book/ru/v1)
Либо используйте [Github Desktop](https://desktop.github.com/) 
Формат конца строк - LF(Unix)
Также есть [вики](https://github.com/provincialkateam/provincial/wiki) для кодеров в которой описаны некоторые функции в игре

# Содержание
1. Файлы для запуска игры находятся в **game** (картинок нет, но можете сами закинуть в *assets/standalone_content/images*) 
2. В папке builder лежат программы, необходимые для сборки исходного кода игры в один большой **provinceQN.qsp**-файл
3. Исходный код игры содержится в папке src в виде кучи **.vb**-файлов
4. Соберите файл **provinceQN.qsp** используя **mySplitterQSP** и замените полученные файлы **provinceQN.qsp** и **provinceQN.qproj** в папке игры **game/assets/standalone_content**
> Иногда при запуске возникает ошибка в локации aaa_start, на 1 строке, чтобы устранить откройте provinceQN.qsp в qGen, выберите локацию aaa_start и удалите символ переноса строки между первой и второй строкой. Просто перенесите курсос в конец `KILLALL` и нажмите клавишу *Delete*, а потом верните обратно используя *Enter*. Сохраните.

# Как собрать .qsp-файл используя mySplitterQSP:
![тутор](https://raw.githubusercontent.com/provincialkateam/provincial/master/builder/%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F.png)
*альтернативный гайд*
1. В верхней строчке – выбрать папку с исходниками *src*, папку .git пропускает само
2. В нижней – путь для будущего файла txt2gam, рядом с ним будет создан qproj
3. Жмем «Собрать» - немного ждем и получаем файл в уже подготовленной кодировке
4. Дальше используем утилиту txt2gam.exe и делаем с txt файла qsp  - если txt2gam положить рядом с утилиткой - то не надо, запустит автоматом
5. Если есть уверенность, что новые папки не создавались – пользуемся старым qproj, если нет – собираем в кучу новый qsp и qproj.
6. Важно – плеер запускает игру с самой верхней локации, но утилитка собирает папки и локации в них по алфавиту, так что надо будет перетащить папку/локацию наверх, но, если используется старый qproj-файл – этого не должно быть. У нас в Провинциалке первая лока переименована в aaa\_start, так что неактуально
# Организация исходного кода
* Используйте английские названия для функций вместо транслита. 
Используйте онлайн-переводчик, если столкнулись с трудностями с переводом.
```Fortran
! Хорошо
if argv[0] = 'main':
if argv[0] = 'university':
! Плохо
if argv[0] = 'glavnaya':
if argv[0] = 'universitet':
```

* Отделяйте слова в имени функции или переменной нижним подчеркиванием
```Fortran
! Хорошо
if $args[0] = 'look_at_sky':
! Плохо
if $args[0] = 'lookatsky':
```

* Используйте присваивание нового значения переменной в сжатой форме, к примеру
`horny += 5` - равносильно `horny = horny + 5`
`money -= 600` - равносильно `money = money - 600`

* Отделяйте логические уровни кода отступами. Используйте табуляцию для отступов
```Fortran
! Хорошо
if $args[0] = 'look_at_sky':
	act 'Посмотреть на небо':
		gs 'zz_render', '', '', 'Разве оно не прекрасно?'
	end
end    
! Плохо
if $args[0] = 'look_at_sky':
act 'Посмотреть на небо':
gs 'zz_render', '', '', 'Разве оно не прекрасно?'
end
end   
```
* По возможности документируйте сложный код функции или переменной в комментариях . 
```Fortran
! генерируем события в номерах, не повторяемся
! $npc['0,hotelwork_day'] - день рабочей смены
```
* Если переменная после использования в функции ненужна убивайте ее в конце
```Ruby
killvar 'sex_count'
```